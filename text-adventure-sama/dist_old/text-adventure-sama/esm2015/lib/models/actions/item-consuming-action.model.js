import { OneTimeAction } from './one-time-action.model';
import { ItemConsumingActionEvent } from '../events/item-consuming-action.event';
import { InteractionType } from '../interactions/interaction-type.enum';
import { ItemEventService } from '../../services/item-event.service';
/**
 * An ItemConsumingAction is only triggered once and uses an Item (once) in the players inventory.
 * It can only be triggered, if the user has got the Item in her inventory.
 */
export class ItemConsumingAction extends OneTimeAction {
    constructor() {
        super();
        this.setInteractionType(InteractionType.USE);
    }
    trigger() {
        if (this.getWasTriggered()) {
            return this.getResponseAfterUse();
        }
        ItemEventService.getInstance().consumeItem(new ItemConsumingActionEvent(this));
        this.setWasTriggered(true);
        return this.getResponse();
    }
    reset() {
        this.setWasTriggered(false);
    }
    getItem() {
        return this.Item;
    }
    setItem(item) {
        this.Item = item;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbS1jb25zdW1pbmctYWN0aW9uLm1vZGVsLmpzIiwic291cmNlUm9vdCI6IkU6L0Rva3VtZW50ZS9SZXBvc2l0b3JpZXMvVGV4dEFkdmVudHVyZVNhbWEvdGV4dC1hZHZlbnR1cmUtc2FtYS9wcm9qZWN0cy90ZXh0LWFkdmVudHVyZS1zYW1hL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9tb2RlbHMvYWN0aW9ucy9pdGVtLWNvbnN1bWluZy1hY3Rpb24ubW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRXhELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUN4RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUVyRTs7O0dBR0c7QUFDSCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsYUFBYTtJQUdsRDtRQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRU0sT0FBTztRQUNWLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFO1lBQ3hCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7U0FDckM7UUFFRCxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRS9FLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0IsT0FBTyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLEtBQUs7UUFDUixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTSxPQUFPO1FBQ1YsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFTSxPQUFPLENBQUMsSUFBZ0I7UUFDM0IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT25lVGltZUFjdGlvbiB9IGZyb20gJy4vb25lLXRpbWUtYWN0aW9uLm1vZGVsJztcclxuaW1wb3J0IHsgSW5HYW1lSXRlbSB9IGZyb20gJy4uL0l0ZW0ubW9kZWwnO1xyXG5pbXBvcnQgeyBJdGVtQ29uc3VtaW5nQWN0aW9uRXZlbnQgfSBmcm9tICcuLi9ldmVudHMvaXRlbS1jb25zdW1pbmctYWN0aW9uLmV2ZW50JztcclxuaW1wb3J0IHsgSW50ZXJhY3Rpb25UeXBlIH0gZnJvbSAnLi4vaW50ZXJhY3Rpb25zL2ludGVyYWN0aW9uLXR5cGUuZW51bSc7XHJcbmltcG9ydCB7IEl0ZW1FdmVudFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9pdGVtLWV2ZW50LnNlcnZpY2UnO1xyXG5cclxuLyoqXHJcbiAqIEFuIEl0ZW1Db25zdW1pbmdBY3Rpb24gaXMgb25seSB0cmlnZ2VyZWQgb25jZSBhbmQgdXNlcyBhbiBJdGVtIChvbmNlKSBpbiB0aGUgcGxheWVycyBpbnZlbnRvcnkuXHJcbiAqIEl0IGNhbiBvbmx5IGJlIHRyaWdnZXJlZCwgaWYgdGhlIHVzZXIgaGFzIGdvdCB0aGUgSXRlbSBpbiBoZXIgaW52ZW50b3J5LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEl0ZW1Db25zdW1pbmdBY3Rpb24gZXh0ZW5kcyBPbmVUaW1lQWN0aW9uIHtcclxuICAgIHByaXZhdGUgSXRlbTogSW5HYW1lSXRlbTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0SW50ZXJhY3Rpb25UeXBlKEludGVyYWN0aW9uVHlwZS5VU0UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cmlnZ2VyKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0V2FzVHJpZ2dlcmVkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VBZnRlclVzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSXRlbUV2ZW50U2VydmljZS5nZXRJbnN0YW5jZSgpLmNvbnN1bWVJdGVtKG5ldyBJdGVtQ29uc3VtaW5nQWN0aW9uRXZlbnQodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFdhc1RyaWdnZXJlZCh0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldFdhc1RyaWdnZXJlZChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEl0ZW0oKTogSW5HYW1lSXRlbSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SXRlbShpdGVtOiBJbkdhbWVJdGVtKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5JdGVtID0gaXRlbTtcclxuICAgIH1cclxufVxyXG4iXX0=