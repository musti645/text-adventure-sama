import { Command } from './command.model';
import { Inventory } from './inventory.model';
import { Stage } from './stage.model';
/**
 * Represents the Game.
 */
export class Game {
    constructor() {
        this.Stage = new Stage();
        this.Inventory = new Inventory();
        this.Commands = [];
        this.initializeCommands();
    }
    initializeCommands() {
        const helpCommand = new Command();
        helpCommand.setTrigger('help');
        helpCommand.setDescription('A list of all global commands');
        helpCommand.setUseTypeWritingAnimation(false);
        helpCommand.setResponseFunction(() => {
            let commandsHelp = '';
            this.Commands.forEach(command => {
                commandsHelp += `${command.getTrigger()} - ${command.getDescription()} \r\n `;
            });
            return commandsHelp;
        });
        this.Commands.push(helpCommand);
        const inventoryCommand = new Command();
        inventoryCommand.setTrigger('inventory');
        inventoryCommand.setDescription('List all items in your inventory.');
        inventoryCommand.setUseTypeWritingAnimation(false);
        inventoryCommand.setResponseFunction(() => {
            if (this.Inventory.getItemCount() <= 0) {
                return this.InventoryEmptyResponse;
            }
            let inventoryContents = 'Items in Inventory: \r\n ';
            this.Inventory.getItems().forEach(item => {
                inventoryContents += `${item.getName()} \r\n `;
            });
            return inventoryContents;
        });
        this.Commands.push(inventoryCommand);
        const sceneCommand = new Command();
        sceneCommand.setTrigger('look around');
        sceneCommand.setDescription('Get a description of the scene you\'re in');
        sceneCommand.setUseTypeWritingAnimation(true);
        sceneCommand.setResponseFunction(() => {
            let description = this.Stage.getCurrentScene().getDescription();
            for (const item of this.Stage.getCurrentScene().getItems()) {
                description += ` ${item.getInSceneDescription()}`;
            }
            return description;
        });
        this.Commands.push(sceneCommand);
    }
    getStage() {
        return this.Stage;
    }
    getInventory() {
        return this.Inventory;
    }
    setInventory(inventory) {
        this.Inventory = inventory;
    }
    getScenesCount() {
        return this.Stage.getScenesCount();
    }
    getTitle() {
        return this.Title;
    }
    setTitle(title) {
        this.Title = title;
    }
    getIntroduction() {
        return this.Introduction;
    }
    setIntroduction(intro) {
        this.Introduction = intro;
    }
    getCommands() {
        return this.Commands;
    }
    setCommands(commands) {
        this.Commands = commands;
    }
    getItemNotFoundResponse() {
        return this.Stage.getCurrentScene().getItemNotFoundResponse();
    }
    getInvalidInputResponse() {
        return this.Stage.getCurrentScene().getInvalidInputResponse();
    }
    getActionNotRecognizedResponse() {
        return this.Stage.getCurrentScene().getActionNotRecognizedResponse();
    }
    getSceneDescription() {
        return this.Stage.getCurrentScene().getDescription();
    }
    getItemNotFoundInInventoryResponse() {
        return this.ItemNotFoundInInventoryResponse;
    }
    setItemNotFoundInInventoryResponse(response) {
        this.ItemNotFoundInInventoryResponse = response;
    }
    getActionsInScene() {
        return this.Stage.getCurrentScene().getActions();
    }
    getItemsInScene() {
        return this.Stage.getCurrentScene().getItems();
    }
    getItemsInInventory() {
        return this.Inventory.getItems();
    }
    removeItemFromScene(item) {
        this.Stage.getCurrentScene().removeItemFromScene(item);
    }
    addItemToInventory(item) {
        this.Inventory.addItem(item);
    }
    removeItemFromInventory(item) {
        this.Inventory.removeItemFromInventory(item.getID());
    }
    getItemAddedToInventoryResponse() {
        return this.ItemAddedToInventoryResponse;
    }
    setItemAddedToInventoryResponse(response) {
        this.ItemAddedToInventoryResponse = response;
    }
    getGatewayTargetNotFoundResponse() {
        return this.GatewayTargetNotFoundResponse;
    }
    setGatewayTargetNotFoundResponse(response) {
        this.GatewayTargetNotFoundResponse = response;
    }
    getInventoryEmptyResponse() {
        return this.InventoryEmptyResponse;
    }
    setInventoryEmptyResponse(response) {
        this.InventoryEmptyResponse = response;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiJFOi9Eb2t1bWVudGUvUmVwb3NpdG9yaWVzL1RleHRBZHZlbnR1cmVTYW1hL3RleHQtYWR2ZW50dXJlLXNhbWEvcHJvamVjdHMvdGV4dC1hZHZlbnR1cmUtc2FtYS9zcmMvIiwic291cmNlcyI6WyJsaWIvbW9kZWxzL2dhbWUubW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzFDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUU5QyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXRDOztHQUVHO0FBQ0gsTUFBTSxPQUFPLElBQUk7SUFXYjtRQUNJLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksU0FBUyxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVPLGtCQUFrQjtRQUN0QixNQUFNLFdBQVcsR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ2xDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDL0IsV0FBVyxDQUFDLGNBQWMsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1FBQzVELFdBQVcsQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QyxXQUFXLENBQUMsbUJBQW1CLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksWUFBWSxHQUFHLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDNUIsWUFBWSxJQUFJLEdBQUcsT0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLE9BQU8sQ0FB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Q0FBQztJQUNqQyxDQUFDO0lBRU0sdUJBQXVCLENBQUMsSUFBZ0I7UUFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRU0sK0JBQStCO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLDRCQUE0QixDQUFDO0lBQzdDLENBQUM7SUFFTSwrQkFBK0IsQ0FBQyxRQUFnQjtRQUNuRCxJQUFJLENBQUMsNEJBQTRCLEdBQUcsUUFBUSxDQUFDO0lBQ2pELENBQUM7SUFFTSxnQ0FBZ0M7UUFDbkMsT0FBTyxJQUFJLENBQUMsNkJBQTZCLENBQUM7SUFDOUMsQ0FBQztJQUVNLGdDQUFnQyxDQUFDLFFBQWdCO1FBQ3BELElBQUksQ0FBQyw2QkFBNkIsR0FBRyxRQUFRLENBQUM7SUFDbEQsQ0FBQztJQUVNLHlCQUF5QjtRQUM1QixPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztJQUN2QyxDQUFDO0lBRU0seUJBQXlCLENBQUMsUUFBZ0I7UUFDN0MsSUFBSSxDQUFDLHNCQUFzQixHQUFHLFFBQVEsQ0FBQztJQUMzQyxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuL2FjdGlvbnMvYWN0aW9uLm1vZGVsJztcclxuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4vY29tbWFuZC5tb2RlbCc7XHJcbmltcG9ydCB7IEludmVudG9yeSB9IGZyb20gJy4vaW52ZW50b3J5Lm1vZGVsJztcclxuaW1wb3J0IHsgSW5HYW1lSXRlbSB9IGZyb20gJy4vSXRlbS5tb2RlbCc7XHJcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSAnLi9zdGFnZS5tb2RlbCc7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgR2FtZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBHYW1lIHtcclxuICAgIHByaXZhdGUgVGl0bGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgSW50cm9kdWN0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIEl0ZW1Ob3RGb3VuZEluSW52ZW50b3J5UmVzcG9uc2U6IHN0cmluZztcclxuICAgIHByaXZhdGUgSXRlbUFkZGVkVG9JbnZlbnRvcnlSZXNwb25zZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBHYXRld2F5VGFyZ2V0Tm90Rm91bmRSZXNwb25zZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFbXB0eVJlc3BvbnNlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIFN0YWdlOiBTdGFnZTtcclxuICAgIHByaXZhdGUgSW52ZW50b3J5OiBJbnZlbnRvcnk7XHJcbiAgICBwcml2YXRlIENvbW1hbmRzOiBDb21tYW5kW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5TdGFnZSA9IG5ldyBTdGFnZSgpO1xyXG4gICAgICAgIHRoaXMuSW52ZW50b3J5ID0gbmV3IEludmVudG9yeSgpO1xyXG4gICAgICAgIHRoaXMuQ29tbWFuZHMgPSBbXTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDb21tYW5kcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUNvbW1hbmRzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGhlbHBDb21tYW5kID0gbmV3IENvbW1hbmQoKTtcclxuICAgICAgICBoZWxwQ29tbWFuZC5zZXRUcmlnZ2VyKCdoZWxwJyk7XHJcbiAgICAgICAgaGVscENvbW1hbmQuc2V0RGVzY3JpcHRpb24oJ0EgbGlzdCBvZiBhbGwgZ2xvYmFsIGNvbW1hbmRzJyk7XHJcbiAgICAgICAgaGVscENvbW1hbmQuc2V0VXNlVHlwZVdyaXRpbmdBbmltYXRpb24oZmFsc2UpO1xyXG4gICAgICAgIGhlbHBDb21tYW5kLnNldFJlc3BvbnNlRnVuY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29tbWFuZHNIZWxwID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuQ29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRzSGVscCArPSBgJHtjb21tYW5kLmdldFRyaWdnZXIoKX0gLSAke2NvbW1hbmQuZ2V0RGVzY3JpcHRpb24oKX0gXFxyXFxuIGA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tbWFuZHNIZWxwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuQ29tbWFuZHMucHVzaChoZWxwQ29tbWFuZCk7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBpbnZlbnRvcnlDb21tYW5kID0gbmV3IENvbW1hbmQoKTtcclxuICAgICAgICBpbnZlbnRvcnlDb21tYW5kLnNldFRyaWdnZXIoJ2ludmVudG9yeScpO1xyXG4gICAgICAgIGludmVudG9yeUNvbW1hbmQuc2V0RGVzY3JpcHRpb24oJ0xpc3QgYWxsIGl0ZW1zIGluIHlvdXIgaW52ZW50b3J5LicpO1xyXG4gICAgICAgIGludmVudG9yeUNvbW1hbmQuc2V0VXNlVHlwZVdyaXRpbmdBbmltYXRpb24oZmFsc2UpO1xyXG4gICAgICAgIGludmVudG9yeUNvbW1hbmQuc2V0UmVzcG9uc2VGdW5jdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkludmVudG9yeS5nZXRJdGVtQ291bnQoKSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5JbnZlbnRvcnlFbXB0eVJlc3BvbnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBpbnZlbnRvcnlDb250ZW50cyA9ICdJdGVtcyBpbiBJbnZlbnRvcnk6IFxcclxcbiAnO1xyXG4gICAgICAgICAgICB0aGlzLkludmVudG9yeS5nZXRJdGVtcygpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnlDb250ZW50cyArPSBgJHtpdGVtLmdldE5hbWUoKX0gXFxyXFxuIGA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW52ZW50b3J5Q29udGVudHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5Db21tYW5kcy5wdXNoKGludmVudG9yeUNvbW1hbmQpO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc2NlbmVDb21tYW5kID0gbmV3IENvbW1hbmQoKTtcclxuICAgICAgICBzY2VuZUNvbW1hbmQuc2V0VHJpZ2dlcignbG9vayBhcm91bmQnKTtcclxuICAgICAgICBzY2VuZUNvbW1hbmQuc2V0RGVzY3JpcHRpb24oJ0dldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBzY2VuZSB5b3VcXCdyZSBpbicpO1xyXG4gICAgICAgIHNjZW5lQ29tbWFuZC5zZXRVc2VUeXBlV3JpdGluZ0FuaW1hdGlvbih0cnVlKTtcclxuICAgICAgICBzY2VuZUNvbW1hbmQuc2V0UmVzcG9uc2VGdW5jdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IHRoaXMuU3RhZ2UuZ2V0Q3VycmVudFNjZW5lKCkuZ2V0RGVzY3JpcHRpb24oKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuU3RhZ2UuZ2V0Q3VycmVudFNjZW5lKCkuZ2V0SXRlbXMoKSkge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gYCAke2l0ZW0uZ2V0SW5TY2VuZURlc2NyaXB0aW9uKCl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuQ29tbWFuZHMucHVzaChzY2VuZUNvbW1hbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdGFnZSgpOiBTdGFnZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuU3RhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEludmVudG9yeSgpOiBJbnZlbnRvcnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkludmVudG9yeTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SW52ZW50b3J5KGludmVudG9yeTogSW52ZW50b3J5KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5JbnZlbnRvcnkgPSBpbnZlbnRvcnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFNjZW5lc0NvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuU3RhZ2UuZ2V0U2NlbmVzQ291bnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGl0bGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5UaXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VGl0bGUodGl0bGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuVGl0bGUgPSB0aXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50cm9kdWN0aW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuSW50cm9kdWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRJbnRyb2R1Y3Rpb24oaW50cm86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuSW50cm9kdWN0aW9uID0gaW50cm87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENvbW1hbmRzKCk6IENvbW1hbmRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuQ29tbWFuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENvbW1hbmRzKGNvbW1hbmRzOiBDb21tYW5kW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkNvbW1hbmRzID0gY29tbWFuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEl0ZW1Ob3RGb3VuZFJlc3BvbnNlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuU3RhZ2UuZ2V0Q3VycmVudFNjZW5lKCkuZ2V0SXRlbU5vdEZvdW5kUmVzcG9uc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW52YWxpZElucHV0UmVzcG9uc2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5TdGFnZS5nZXRDdXJyZW50U2NlbmUoKS5nZXRJbnZhbGlkSW5wdXRSZXNwb25zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBY3Rpb25Ob3RSZWNvZ25pemVkUmVzcG9uc2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5TdGFnZS5nZXRDdXJyZW50U2NlbmUoKS5nZXRBY3Rpb25Ob3RSZWNvZ25pemVkUmVzcG9uc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2NlbmVEZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLlN0YWdlLmdldEN1cnJlbnRTY2VuZSgpLmdldERlc2NyaXB0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEl0ZW1Ob3RGb3VuZEluSW52ZW50b3J5UmVzcG9uc2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5JdGVtTm90Rm91bmRJbkludmVudG9yeVJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRJdGVtTm90Rm91bmRJbkludmVudG9yeVJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkl0ZW1Ob3RGb3VuZEluSW52ZW50b3J5UmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QWN0aW9uc0luU2NlbmUoKTogQWN0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLlN0YWdlLmdldEN1cnJlbnRTY2VuZSgpLmdldEFjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SXRlbXNJblNjZW5lKCk6IEluR2FtZUl0ZW1bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuU3RhZ2UuZ2V0Q3VycmVudFNjZW5lKCkuZ2V0SXRlbXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SXRlbXNJbkludmVudG9yeSgpOiBJbkdhbWVJdGVtW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkludmVudG9yeS5nZXRJdGVtcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVJdGVtRnJvbVNjZW5lKGl0ZW06IEluR2FtZUl0ZW0pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLlN0YWdlLmdldEN1cnJlbnRTY2VuZSgpLnJlbW92ZUl0ZW1Gcm9tU2NlbmUoaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEl0ZW1Ub0ludmVudG9yeShpdGVtOiBJbkdhbWVJdGVtKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5JbnZlbnRvcnkuYWRkSXRlbShpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlSXRlbUZyb21JbnZlbnRvcnkoaXRlbTogSW5HYW1lSXRlbSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuSW52ZW50b3J5LnJlbW92ZUl0ZW1Gcm9tSW52ZW50b3J5KGl0ZW0uZ2V0SUQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEl0ZW1BZGRlZFRvSW52ZW50b3J5UmVzcG9uc2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5JdGVtQWRkZWRUb0ludmVudG9yeVJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRJdGVtQWRkZWRUb0ludmVudG9yeVJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkl0ZW1BZGRlZFRvSW52ZW50b3J5UmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R2F0ZXdheVRhcmdldE5vdEZvdW5kUmVzcG9uc2UoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5HYXRld2F5VGFyZ2V0Tm90Rm91bmRSZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0R2F0ZXdheVRhcmdldE5vdEZvdW5kUmVzcG9uc2UocmVzcG9uc2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuR2F0ZXdheVRhcmdldE5vdEZvdW5kUmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW52ZW50b3J5RW1wdHlSZXNwb25zZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkludmVudG9yeUVtcHR5UmVzcG9uc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEludmVudG9yeUVtcHR5UmVzcG9uc2UocmVzcG9uc2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuSW52ZW50b3J5RW1wdHlSZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==